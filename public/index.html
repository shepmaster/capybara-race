<!DOCTYPE html>
<html>
  <head>
    <title>Capybara race condition with `text` matcher</title>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script type="text/javascript">
      $(document).ready(function() {
        var doDelete = function() {
          $('.element_to_delete').remove();
        }

        $('#delete_the_element').click(function() {
          setTimeout(doDelete, 1000);
        })
      })
    </script>
  </head>
  <body>
    <a href="#" id="delete_the_element">Delete the element</a>
    <div class="element_to_delete">This stuff will be gone!</div>
  </body>
</html>
